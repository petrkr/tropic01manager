<RootView>:
    orientation: "vertical"
    padding: "16dp"
    spacing: "12dp"

    # Status row with cards
    MDBoxLayout:
        size_hint_y: None
        height: "56dp"
        spacing: "8dp"

        MDCard:
            size_hint_x: 0.5
            padding: "8dp"
            radius: [8]
            elevation: 2

            MDLabel:
                text: root.connection_status
                halign: "left"
                valign: "middle"
                theme_text_color: "Primary"
                font_style: "Body1"

        MDCard:
            size_hint_x: 0.5
            padding: "8dp"
            radius: [8]
            elevation: 2

            MDLabel:
                text: root.session_status
                halign: "right"
                valign: "middle"
                theme_text_color: "Primary"
                font_style: "Body1"

    # Action buttons row
    MDBoxLayout:
        size_hint_y: None
        height: "48dp"
        spacing: "8dp"

        MDRaisedButton:
            text: "Connection"
            on_press: root.open_connection_popup()
            size_hint_x: 1

        MDRaisedButton:
            id: btn_connect
            text: "Connect"
            on_press: root.toggle_connect()
            size_hint_x: 1
            md_bg_color: app.theme_cls.primary_color

        MDRaisedButton:
            id: btn_session
            text: "Start Session"
            on_press: root.toggle_session()
            size_hint_x: 1
            disabled: not root.is_connected

    # TabbedPanel for other functions
    MDTabs:
        id: tabs
        size_hint_y: 1
        on_tab_switch: app.on_tab_switch(*args)

        # Chip ID Tab
        ChipTab:
            title: "Chip ID"
            tab: tabs

        # Ping Tab
        PingTab:
            title: "Ping"
            tab: tabs

        # Info Tab
        InfoTab:
            title: "Info"
            tab: tabs

        # Random Tab
        RandomTab:
            title: "Random"
            tab: tabs

        # Config Tab
        ConfigTab:
            title: "Config"
            tab: tabs


# Tab Content Classes
<ChipTab>:
    MDBoxLayout:
        orientation: "vertical"
        padding: "16dp"
        spacing: "16dp"

        MDCard:
            size_hint_y: None
            height: "100dp"
            padding: "16dp"
            radius: [12]
            elevation: 4

            MDLabel:
                text: app.root.chip_id if app.root else "Unknown"
                halign: "center"
                valign: "middle"
                font_style: "H5"
                theme_text_color: "Primary"

        MDLabel:
            text: "Chip Identification"
            halign: "center"
            theme_text_color: "Secondary"
            font_style: "Subtitle2"


<PingTab>:
    MDBoxLayout:
        orientation: "vertical"
        padding: "16dp"

        MDLabel:
            text: "Ping functionality"
            halign: "center"
            theme_text_color: "Hint"
            font_style: "Body1"

        MDRaisedButton:
            text: "Send Ping"
            size_hint_x: None
            width: "200dp"
            pos_hint: {"center_x": 0.5}
            on_press: app.send_ping()


<InfoTab>:
    MDBoxLayout:
        orientation: "vertical"
        padding: "16dp"

        MDLabel:
            text: "Device Information"
            halign: "center"
            theme_text_color: "Hint"
            font_style: "Body1"


<RandomTab>:
    MDBoxLayout:
        orientation: "vertical"
        padding: "16dp"

        MDLabel:
            text: "Random Number Generator"
            halign: "center"
            theme_text_color: "Hint"
            font_style: "Body1"


<ConfigTab>:
    MDBoxLayout:
        orientation: "vertical"
        padding: "16dp"

        MDLabel:
            text: "Device Configuration"
            halign: "center"
            theme_text_color: "Hint"
            font_style: "Body1"


# Connection Dialog - created dynamically
