<RootView>:
    orientation: "vertical"
    padding: "16dp"
    spacing: "12dp"

    # Status row with cards
    MDBoxLayout:
        size_hint_y: None
        height: "56dp"
        spacing: "8dp"

        MDCard:
            size_hint_x: 0.5
            padding: "8dp"
            radius: [8]
            elevation: 2

            MDLabel:
                text: root.connection_status
                halign: "left"
                valign: "middle"
                theme_text_color: "Primary"
                font_style: "Body1"

        MDCard:
            size_hint_x: 0.5
            padding: "8dp"
            radius: [8]
            elevation: 2

            MDLabel:
                text: root.session_status
                halign: "right"
                valign: "middle"
                theme_text_color: "Primary"
                font_style: "Body1"

    # Action buttons row
    MDBoxLayout:
        size_hint_y: None
        height: "48dp"
        spacing: "8dp"

        MDRaisedButton:
            text: "Connection"
            on_press: root.open_connection_popup()
            size_hint_x: 1

        MDRaisedButton:
            id: btn_connect
            text: "Connect"
            on_press: root.toggle_connect()
            size_hint_x: 1
            md_bg_color: app.theme_cls.primary_color

        MDRaisedButton:
            id: btn_session
            text: "Start Session"
            on_press: root.toggle_session()
            size_hint_x: 1
            disabled: not root.is_connected

    # TabbedPanel for other functions
    MDTabs:
        id: tabs
        size_hint_y: 1
        on_tab_switch: app.on_tab_switch(*args)

        # Chip ID Tab
        ChipTab:
            title: "Chip ID"
            tab: tabs

        # Ping Tab
        PingTab:
            title: "Ping"
            tab: tabs

        # Info Tab
        InfoTab:
            title: "Info"
            tab: tabs

        # Random Tab
        RandomTab:
            title: "Random"
            tab: tabs

        # Config Tab
        ConfigTab:
            title: "Config"
            tab: tabs


# Tab Content Classes
<ChipTab>:
    id: chip_tab
    MDScrollView:
        MDBoxLayout:
            id: chip_container
            orientation: "vertical"
            padding: "12dp"
            spacing: "2dp"
            size_hint_y: None
            height: self.minimum_height


<PingTab>:
    MDBoxLayout:
        orientation: "vertical"
        padding: "16dp"
        spacing: "12dp"

        MDLabel:
            text: "Input"
            size_hint_y: None
            height: "24dp"
            theme_text_color: "Secondary"
            font_style: "Body2"

        MDTextField:
            id: ping_input
            mode: "rectangle"
            hint_text: "Enter text"
            size_hint_y: None
            height: "48dp"

        MDRaisedButton:
            id: btn_send_ping
            text: "Send Ping"
            size_hint_y: None
            height: "48dp"
            disabled: True
            on_press: app.send_ping()

        MDLabel:
            text: "Response:"
            size_hint_y: None
            height: "24dp"
            theme_text_color: "Secondary"
            font_style: "Body2"

        MDScrollView:
            MDLabel:
                id: ping_result
                text: ""
                markup: True
                theme_text_color: "Primary"
                font_style: "Body2"
                size_hint_y: None
                height: self.texture_size[1]


<InfoTab>:
    MDBoxLayout:
        orientation: "vertical"
        padding: "16dp"

        MDLabel:
            text: "Device Information"
            halign: "center"
            theme_text_color: "Hint"
            font_style: "Body1"


<RandomTab>:
    MDBoxLayout:
        orientation: "vertical"
        padding: "16dp"

        MDLabel:
            text: "Random Number Generator"
            halign: "center"
            theme_text_color: "Hint"
            font_style: "Body1"


<ConfigTab>:
    MDBoxLayout:
        orientation: "vertical"
        padding: "16dp"

        MDLabel:
            text: "Device Configuration"
            halign: "center"
            theme_text_color: "Hint"
            font_style: "Body1"


# Connection Dialog - created dynamically
